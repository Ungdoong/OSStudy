# 191216(Mon)_병행프로세스와 상호배제

## 병행 프로세스

________________

### 실행 형태 및 개념

1. CPU개수에 따른 형태

   - 하나의 CPU에서 인터리빙 형식

   ![1576455598594](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1576455598594.png)

   - 여러개의 CPU에서 병렬 처리 형식

![1576455611462](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1576455611462.png)

2. 메모리 구조에 따른 형태

   - 강 결합 멀티 프로세서 시스템 → 공유 메모리 구조

   - 약 결합 멀티 프로세서 시스템 → 분산 메모리 구조

     - 분산메모리

       각 처리기마다 개별 메모리를 가짐

- 다중처리 시스템, 분산처리 시스템 주요 요소

### 프로세스 간 협력 이점

- 정보 공유
- 계산속도 향상
- 모듈적 구성 강화
- 편의성 증대 - 한 사용자가 편집, 인쇄 등 여러 작업을 병렬로 수행 가능

### 프로세스 분류

- 독립적 프로세스

  - 단일처리 시스템에서 각각 독립적으로 여러 프로세스들이 병행 수행되는 것
  - 단일 프로세스 내에서도 병행성 가능
    - 병행문
      - 1개의 프로세스가 여러가닥의 병렬 프로세스로 분할되었다가 다시 하나로 결합
      - parbegin / parend 문
    - 우선순위 그래프
      - 정점 : 문장, 간선 : 선후 관계
    - Fork/Join 구조
      - fork L : 2개의 병행 수행을 만듬(레이블 L 위치부터 fork 명령어 다음까지)
      - join n : 병행하는 n개의 흐름을 하나로 재결합

- 협력적 프로세스

  - 다중처리 시스템 내 타 프로세스의 실행에 영향을 주거나 받음

    - 데이터 공유방식 / 공유데이터 접근방식
      - 논리 주소공간을 통해 공유(스레드 등)
      - 공유변수, 공유파일 통해 공유
      - 메시지 전달

  - 협력적 수행 방식 구분

    - 비동기적 수행

       프로세스들 간 정교한 협력을 통해서만 기능을 수행

    - 동기적 수행 - 프로세스 동기화(Process Synchronization)

      - 여러 독립 프로세스 간 처리 순서를 결정
      - 공유 데이터에 대한 올바른 공유/접근/조작 필요

### 해결과제

- 공유 자원을 상호 배타적으로 사용. 통신망 등은 한 순간에 하나의 프로세스만 사용.
- 병행 프로세스 간에는 협력이나 동기화가 필요
- 실행 순서에 맞게 수행
- 교착 상태를 해결
- 상호배제 보장



## 상호배제(Mutual Exclusion)

_______________

병행 프로세스에서 프로세스 하나가 공유자원을 사용할 때 다른 프로세스들이 동일한 자원을 사용할 수 없도록 하는 방법→ 동기화

##### 임계자원(Critical Resource) - 두 프로세스가 동시에 사용할 수 없는 공유 자원

##### 임계영역(Critical Section) - 임계자원에 접근하고 실행하는 프로그램 코드 부분

### 상호배제를 만족하는 조건

- 두 프로세스는 동시에 임계영역에 진입할 수 없음
- 프로세스가 공유 자원을 사용하려고 너무 오래 기다리게 하면 안됨
- 임계 영역이 비어 있으면 어느 프로세스나 접근 가능해야 함

### 임계영역(Critical Section)

- 만족해야 하는 조건

  - 상호배제

     어떤 프로세스가 임계영역에서 작업 중이면, 다른 프로세스는 진입 불가

  - 진행

     임계영역에 프로세스가 없는 상태에서 여러 프로세스가 진입하려 할 때는 어떤 프로세스는 반드시 진입 가능하여야 함

  - 한정 대기

     다른 프로세스가 임계영역을 무한정 기다리는 상황 방지

### Race Condition

 여러 프로세스가 동시에 공유 데이터에 접근할 때 접근 순서에 따라 실행 결과가 달라지는 상황에 놓인 프로세스

![1576456150119](C:\Users\student\AppData\Roaming\Typora\typora-user-images\1576456150119.png)